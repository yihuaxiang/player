
<!DOCTYPE html>
<html lang="zh-CN">
  <head><script async src="https://www.googletagmanager.com/gtag/js?id=G-HZSTV8S8B5"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag("js", new Date()); gtag("config", "G-HZSTV8S8B5"); </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="shortcut icon" type="image/x-icon" href="https://z.wiki/favicon.ico"/>
      <meta name="keywords" content="敖武的博客 自定义视频播放组件 小游戏 web游戏 html 前端程序员"/>
      <meta name="description" content="敖武的博客 自定义视频播放组件 小游戏 web游戏 html 前端程序员"/>
    <title>智能播放器</title>
    <link
      href="https://6.z.wiki/autoupload/20230324/udYh.font-awesome.min.css"
      rel="stylesheet"
      integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="https://playground.z.wiki/custom-video-player/css/progress.css" />
    <link rel="stylesheet" href="https://playground.z.wiki/custom-video-player/css/style.css" />
  </head>
  <body class="content__default" id="ctn">
    <h1>吃瓜视频🍉🍉🍉</h1>
    <img src="" id="img" />
    <video
      src="videos/gone.mp4"
      id="video"
      class="screen"
      poster="https://0.z.wiki/autoupload/20240707/fHFI/512X512/image.png"
    ></video>
    <div class="controls">
      <button class="btn" id="play">
        <i class="fa fa-play fa-2x"></i>
      </button>
      <button class="btn" id="stop">
        <i class="fa fa-stop fa-2x"></i>
      </button>
      <input
        type="range"
        id="progress"
        class="progress"
        min="0"
        max="100"
        step="0.1"
        value="0"
      />
      <span class="timestamp" id="timestamp">00:00</span>
    </div>

    <script src="https://playground.z.wiki/custom-video-player/script.js"></script>
    <script type="text/javascript">
      function determineContentTypeByExtension(url) {
          // 定义图片和视频扩展名列表 (小写)
          var imageExtensions = ['jpeg', 'jpg', 'png', 'gif', 'bmp', 'webp', 'svg', 'tiff', 'ico'];
          var videoExtensions = ['mp4', 'webm', 'ogg', 'avi', 'wmv', 'mov', 'flv', 'mkv', 'm4v'];
      
          // 获取 URL 中的文件扩展名
          var parts = url.split('.');
          var extension = parts[parts.length - 1] || '';
          extension = extension.split(/\#|\?/)[0].toLowerCase();
      
          // 判断扩展名是否在图片扩展名列表中
          if (imageExtensions.indexOf(extension) !== -1) {
              return 'image';
          }
      
          // 判断扩展名是否在视频扩展名列表中
          if (videoExtensions.indexOf(extension) !== -1) {
              return 'video';
          }
      
          // 其他类型
          return 'other';
      }

      
      var videos = new URLSearchParams(location.search).get("video")

      var type = determineContentTypeByExtension(videos);
      var ctn = document.querySelector('#ctn');
      ctn.classList.add(type);

      if (type == 'image') {
        document.querySelector('#img').src = videos;
      } else if (type == 'video') {
        document.querySelector('#video').src = videos;
        document.querySelector('#video').play();
      } else {
        // TODO 点击直接下载这个 URL 的内容
      }
    </script>
  </body>
</html>

<!-- https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Client-side_web_APIs/Video_and_audio_APIs -->
<div class="pv-accumulation" style="text-align: right; padding-right: 20px; color: #7a7a7a; font-size: 14px;position: fixed; right: 5px; bottom: 5px; opacity: 0.6; font-size: 12px;"> 访问量：648 </div>
